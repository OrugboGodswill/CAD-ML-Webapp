<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CADPredict - Health Assessment</title>
    <link rel="stylesheet" href="assets/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
            50% { box-shadow: 0 0 30px rgba(59, 130, 246, 0.6); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes medical-cross {
            0% { opacity: 0.1; transform: rotate(0deg); }
            50% { opacity: 0.3; transform: rotate(180deg); }
            100% { opacity: 0.1; transform: rotate(360deg); }
        }
        
        .heartbeat { animation: heartbeat 2s ease-in-out infinite; }
        .pulse-glow { animation: pulse-glow 3s ease-in-out infinite; }
        .float { animation: float 3s ease-in-out infinite; }
        .medical-cross { animation: medical-cross 20s linear infinite; }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .medical-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        /* Medical background pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(239, 68, 68, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        
        
        /* Questionnaire-specific styles */
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .slider-track {
            background: linear-gradient(to right, #3b82f6, #1d4ed8);
        }

           /* Added mobile menu slide-down animation styles */
    .mobile-menu {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
      opacity: 0;
    }
    
    .mobile-menu.show {
      max-height: 300px;
      opacity: 1;
    }
    
    .mobile-menu-backdrop {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.95);
    }

    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-red-50 medical-bg relative overflow-x-hidden">
    <!-- Header -->
  <header class="bg-white border-b border-white-1 sticky top-0 bg-transparent z-50">
    <div class="max-w-4xl mx-auto px-4 pb-5 pt-5 sm:px-6 lg:px-0">
      <div class="flex justify-between items-center h-16">
        <!-- Logo -->
        <div class="flex items-center space-x-2">
          <div>
            <!-- Heart Icon -->
                    <div class="bg-gradient-to-r from-blue-600 to-red-500 p-2 rounded-xl shadow-lg transform hover:scale-110 transition-transform duration-200">
                    <a href="/"><i data-lucide="heart" class="h-5 w-5 sm:h-6 sm:w-6 text-white animate-pulse"  ></i></a>
                    </div>
          </div>
          <span class="text-lg sm:text-xl font-bold bg-gradient-to-r from-blue-900 to-red-600 bg-clip-text text-transparent">CADPredict</span>
        </div>

                <!-- Nav links -->
        <nav class="hidden md:flex items-center space-x-6 lg:space-x-8">
        <a href="{{ url_for('index') }}" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">Home</a>
          <a href="{{ url_for('test_form') }}" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">Test</a>
          <a href="{{ url_for('about_page') }}" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">About</a>
          <a href="{{ url_for('Doc_page') }}" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">Doc</a>
          <a href="{{ url_for('statchart') }}" class="text-gray-700 hover:text-blue-600 font-medium transition-colors">Stat Chart</a>
        </nav>
            <!-- Mobile Menu Button -->
        <button id="mobileMenuBtn" class="md:hidden p-2 rounded-lg hover:bg-white/20 transition-all duration-300 hover:scale-110">
          <svg class="h-5 w-5 text-gray-700" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="18" x2="21" y2="18" />
          </svg>
        </button>

<!-- Mobile Menu (with animation) -->
    <div id="mobileMenu" class="mobile-menu md:hidden absolute top-full left-0 w-full mobile-menu-backdrop shadow-2xl z-40 border-t border-white/20">
    <div class="max-w-4xl mx-auto px-6 py-8">
      <nav class="flex flex-col space-y-6">
        <a href="/" class="text-gray-700 hover:text-blue-600 font-medium transition-all duration-300 hover:scale-105 hover:translate-x-2 flex items-center space-x-3 p-3 rounded-xl hover:bg-blue-50/50">
          <i data-lucide="Home" class="w-5 h-5"></i>
          <span>Home</span>
        </a>
        <a href="/about" class="text-gray-700 hover:text-blue-600 font-medium transition-all duration-300 hover:scale-105 hover:translate-x-2 flex items-center space-x-3 p-3 rounded-xl hover:bg-blue-50/50">
          <i data-lucide="info" class="w-5 h-5"></i>
          <span>About</span>
        </a>
        <a href="/Doc" class="text-gray-700 hover:text-blue-600 font-medium transition-all duration-300 hover:scale-105 hover:translate-x-2 flex items-center space-x-3 p-3 rounded-xl hover:bg-blue-50/50">
          <i data-lucide="file-text" class="w-5 h-5"></i>
          <span>Doc</span>
        </a>
        <a href="/statchart" class="text-gray-700 hover:text-blue-600 font-medium transition-all duration-300 hover:scale-105 hover:translate-x-2 flex items-center space-x-3 p-3 rounded-xl hover:bg-blue-50/50">
          <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
          <span>Stat Chart</span>
        </a>
      </nav>
    </div>
  </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="flex flex-col items-center space-y-12">
            
            <!-- Rebuilt Structured Interview card container with stylish design -->
            <div class="w-full max-w-6xl glass-effect shadow-2xl rounded-3xl p-8 card-hover relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-blue-500/5 via-transparent to-red-500/5 rounded-3xl"></div>
                <div class="relative z-10">
                    <div class="text-center mb-8">
                        <div class="inline-flex items-center space-x-3 mb-4">
                            <div class="w-12 h-12 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center heartbeat">
                                <i data-lucide="clipboard-list" class="w-6 h-6 text-white"></i>
                            </div>
                            <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-900 via-purple-700 to-red-600 bg-clip-text text-transparent">Structured Interview</h1>
                        </div>
                        <p class="text-gray-700 text-lg leading-relaxed max-w-2xl mx-auto">Complete this comprehensive health assessment to evaluate your coronary artery disease risk using advanced machine learning algorithms.</p>
                    </div>
                </div>
            </div>

            <!-- Stylish Question Container as HTML Form with POST method -->
            <div class="w-full max-w-6xl glass-effect shadow-2xl rounded-3xl p-10 card-hover relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-br from-green-500/5 via-transparent to-blue-500/5 rounded-3xl"></div>
                <div class="relative z-10">
                    <form action="/predict" method="POST" class="space-y-8">
                        <div class="text-center mb-10">
                            <h2 class="text-3xl font-bold text-gray-800 mb-4">Health Assessment Form</h2>
                            <p class="text-gray-600">Please provide accurate information for the most reliable prediction</p>
                        </div>

                        <!-- Stylish form fields with medical theme -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            
                            <!-- Sex -->
                            <div class="glass-effect border border-blue-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="user" class="w-5 h-5 inline mr-2 text-blue-600"></i>
                                    Sex
                                </label>
                                <div class="space-y-3">
                                    <label class="flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-blue-300 cursor-pointer transition-all duration-300">
                                        <input type="radio" name="sex" value="1" required class="w-4 h-4 text-blue-600">
                                        <span class="ml-3 font-medium">Male</span>
                                    </label>
                                    <label class="flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-blue-300 cursor-pointer transition-all duration-300">
                                        <input type="radio" name="sex" value="0" required class="w-4 h-4 text-blue-600">
                                        <span class="ml-3 font-medium">Female</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Systolic Blood Pressure -->
                            <div class="glass-effect border border-red-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="activity" class="w-5 h-5 inline mr-2 text-red-600"></i>
                                    Systolic Blood Pressure
                                </label>
                                <div class="space-y-4">
                                    <input type="range" name="systolic_bp" min="80" max="200" value="120" class="w-full h-3 bg-gradient-to-r from-red-400 to-red-600 rounded-lg appearance-none cursor-pointer" oninput="updateValue(this, 'sbpValue')">
                                    <div class="text-center">
                                        <span class="text-2xl font-bold text-red-600" id="sbpValue">120</span>
                                        <span class="text-gray-600 ml-2">mmHg</span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span>80</span>
                                        <span>200</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Tobacco -->
                            <div class="glass-effect border border-orange-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="cigarette" class="w-5 h-5 inline mr-2 text-orange-600"></i>
                                    Tobacco Consumption
                                </label>
                                <div class="space-y-4">
                                    <input type="range" name="tobacco_per_yer" min="0" max="50" value="0" class="w-full h-3 bg-gradient-to-r from-orange-400 to-orange-600 rounded-lg appearance-none cursor-pointer" oninput="updateValue(this, 'tobaccoValue')">
                                    <div class="text-center">
                                        <span class="text-2xl font-bold text-orange-600" id="tobaccoValue">0</span>
                                        <span class="text-gray-600 ml-2">packs/year</span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span>0</span>
                                        <span>50</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Cholesterol -->
                            <div class="glass-effect border border-purple-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="droplet" class="w-5 h-5 inline mr-2 text-purple-600"></i>
                                    Total Cholesterol
                                </label>
                                <div class="space-y-4">
                                    <input type="range" name="chol" min="100" max="400" value="200" class="w-full h-3 bg-gradient-to-r from-purple-400 to-purple-600 rounded-lg appearance-none cursor-pointer" oninput="updateValue(this, 'cholesterolValue')">
                                    <div class="text-center">
                                        <span class="text-2xl font-bold text-purple-600" id="cholesterolValue">200</span>
                                        <span class="text-gray-600 ml-2">mg/dl</span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span>100</span>
                                        <span>400</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Adiposity -->
                            <div class="glass-effect border border-green-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="scale" class="w-5 h-5 inline mr-2 text-green-600"></i>
                                    Adiposity (Body Fat Index)
                                </label>
                                <div class="space-y-4">
                                    <input type="range" name="adiposity" min="10" max="50" value="25" class="w-full h-3 bg-gradient-to-r from-green-400 to-green-600 rounded-lg appearance-none cursor-pointer" oninput="updateValue(this, 'adiposityValue')">
                                    <div class="text-center">
                                        <span class="text-2xl font-bold text-green-600" id="adiposityValue">25</span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span>10</span>
                                        <span>50</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Family History -->
                            <div class="glass-effect border border-indigo-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="users" class="w-5 h-5 inline mr-2 text-indigo-600"></i>
                                    Family History of CAD
                                </label>
                                <div class="space-y-3">
                                    <label class="flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-indigo-300 cursor-pointer transition-all duration-300">
                                        <input type="radio" name="famhist" value="1" required class="w-4 h-4 text-indigo-600">
                                        <span class="ml-3 font-medium">Yes</span>
                                    </label>
                                    <label class="flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-indigo-300 cursor-pointer transition-all duration-300">
                                        <input type="radio" name="famhist" value="0" required class="w-4 h-4 text-indigo-600">
                                        <span class="ml-3 font-medium">No</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Stress Prone -->
                            <div class="glass-effect border border-pink-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="zap" class="w-5 h-5 inline mr-2 text-pink-600"></i>
                                    Highly Stress Prone
                                </label>
                                <div class="space-y-3">
                                    <label class="flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-pink-300 cursor-pointer transition-all duration-300">
                                        <input type="radio" name="stress_prone" value="1" required class="w-4 h-4 text-pink-600">
                                        <span class="ml-3 font-medium">Yes</span>
                                    </label>
                                    <label class="flex items-center p-3 border-2 border-gray-200 rounded-xl hover:border-pink-300 cursor-pointer transition-all duration-300">
                                        <input type="radio" name="stress_prone" value="0" required class="w-4 h-4 text-pink-600">
                                        <span class="ml-3 font-medium">No</span>
                                    </label>
                                </div>
                            </div>

                            <!-- BMI -->
                            <div class="glass-effect border border-teal-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="calculator" class="w-5 h-5 inline mr-2 text-teal-600"></i>
                                    Body Mass Index (BMI)
                                </label>
                                <div class="space-y-4">
                                    <input type="range" name="Bmi" min="15" max="50" value="25" class="w-full h-3 bg-gradient-to-r from-teal-400 to-teal-600 rounded-lg appearance-none cursor-pointer" oninput="updateValue(this, 'obesityValue')">
                                    <div class="text-center">
                                        <span class="text-2xl font-bold text-teal-600" id="obesityValue">25</span>
                                        <span class="text-gray-600 ml-2">kg/m²</span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span>15</span>
                                        <span>50</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Alcohol -->
                            <div class="glass-effect border border-amber-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="wine" class="w-5 h-5 inline mr-2 text-amber-600"></i>
                                    Alcohol Consumption
                                </label>
                                <div class="space-y-4">
                                    <input type="range" name="alco_per_year" min="0" max="500" value="50" class="w-full h-3 bg-gradient-to-r from-amber-400 to-amber-600 rounded-lg appearance-none cursor-pointer" oninput="updateValue(this, 'alcoholValue')">
                                    <div class="text-center">
                                        <span class="text-2xl font-bold text-amber-600" id="alcoholValue">50</span>
                                        <span class="text-gray-600 ml-2">units/year</span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span>0</span>
                                        <span>500</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Age -->
                            <div class="glass-effect border border-gray-200/50 rounded-2xl p-6 card-hover">
                                <label class="block text-lg font-semibold text-gray-800 mb-4">
                                    <i data-lucide="calendar" class="w-5 h-5 inline mr-2 text-gray-600"></i>
                                    Age
                                </label>
                                <div class="space-y-4">
                                    <input type="range" name="age" min="20" max="90" value="35" class="w-full h-3 bg-gradient-to-r from-gray-400 to-gray-600 rounded-lg appearance-none cursor-pointer" oninput="updateValue(this, 'ageValue')">
                                    <div class="text-center">
                                        <span class="text-2xl font-bold text-gray-600" id="ageValue">35</span>
                                        <span class="text-gray-600 ml-2">years</span>
                                    </div>
                                    <div class="flex justify-between text-sm text-gray-500">
                                        <span>20</span>
                                        <span>90</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Stylish submit button -->
                        <div class="text-center pt-8">
                            <button type="submit" class="px-12 py-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl hover:from-red-700 hover:to-red-800 transition-all duration-300 hover:scale-105 shadow-xl text-xl font-semibold pulse-glow">
                                <i data-lucide="heart-pulse" class="w-6 h-6 inline mr-3"></i>
                                Get CAD Prediction
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Stylish Result Container (shown after form submission) -->
<div id="resultsSection" class="w-full max-w-6xl glass-effect shadow-2xl rounded-3xl p-10 card-hover relative overflow-hidden 
{% if prediction %} block {% else %} hidden {% endif %}">
    <div class="absolute inset-0 bg-gradient-to-br from-green-500/5 via-transparent to-blue-500/5 rounded-3xl"></div>
    <div class="relative z-10">
        <div class="text-center">
            <div class="w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center 
                 {% if prediction == 'High Risk' %} bg-red-100 text-red-600 {% else %} bg-green-100 text-green-600 {% endif %} heartbeat">
                <i data-lucide="heart-pulse" class="w-12 h-12"></i>
            </div>

            <h2 class="text-4xl font-bold mb-4 bg-gradient-to-r from-blue-900 to-green-700 bg-clip-text text-transparent">
                {{ prediction if prediction else 'Awaiting Results' }}
            </h2>

            <p class="text-xl text-gray-600 mb-8">
                {% if risk_score  %} Risk risk_Score: {{ risk_score }}% {% else %} Processing your health data... {% endif %}
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="glass-effect border border-blue-200/50 rounded-2xl p-6">
                    <h4 class="font-semibold text-blue-800 mb-2">Risk Score</h4>
                    <p class="text-3xl font-bold text-blue-600">{{ risk_score if risk_score else 0 }}%</p>
                </div>
                <div class="glass-effect border border-green-200/50 rounded-2xl p-6">
                    <h4 class="font-semibold text-green-800 mb-2">Recommendation</h4>
                    <p class="text-sm font-medium text-green-600">
                        {{ recommendation if recommendation else 'Fill the form to get results.' }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="glass-effect border-t border-white/20 w-full">
        <div class="max-w-7xl px-4 sm:px-6 lg:px-8 py-6 text-center">
            <p class="text-sm text-gray-700 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-300/50 rounded-xl p-4 inline-block shadow-lg backdrop-blur-sm">
                <strong class="text-yellow-800">Educational prototype — not a medical device.</strong> 
                <span class="text-gray-600">For emergencies, seek urgent care.</span>
            </p>
        </div>
    </footer>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        function updateValue(slider, displayId) {
            document.getElementById(displayId).textContent = slider.value;
        }
        
        // Form validation
        document.querySelector('form').addEventListener('submit', function(e) {
            const requiredRadios = ['sex', 'famhist', 'stress_prone'];
            let isValid = true;
            
            requiredRadios.forEach(name => {
                const radios = document.querySelectorAll(`input[name="${name}"]`);
                const checked = Array.from(radios).some(radio => radio.checked);
                if (!checked) {
                    isValid = false;
                    alert(`Please select an option for ${name.charAt(0).toUpperCase() + name.slice(1)}`);
                }
            });
            
            if (!isValid) {
                e.preventDefault();
            }
        });

        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
        const mobileMenu = document.getElementById('mobileMenu');
        mobileMenu.classList.toggle('show');
        });

        document.addEventListener('click', function(event) {
        const mobileMenu = document.getElementById('mobileMenu');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      
            if (!mobileMenu.contains(event.target) && !mobileMenuBtn.contains(event.target)) {
             mobileMenu.classList.remove('show');
            }
        });
    </script>
</body>
</html>
